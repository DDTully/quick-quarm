#!/bin/bash

SCRIPTDIR=${BASH_SOURCE%/*}

if [ ! -f $SCRIPTDIR/../lib/qq-functions ]; then
    echo "Cannot load libraries"
    exit
else
    . $SCRIPTDIR/../lib/qq-functions
    load_variables
fi

### Main ###=======================================================

export LAUNCHEREXE="$QQDIR/bin/zone"

if [ -z "$PUBLICIP" ]; then
    export PUBLICIP=$HOSTIP
fi

log "CONFIG" "Updating eqemu_config.json"
exec_cmd_as $QQUSER "envsubst < $TEMPLATE_EQEMUCONFIG > $QQDIR/bin/eqemu_config.json"

log "CONFIG" "Updating login.json"
exec_cmd_as $QQUSER "envsubst < $TEMPLATE_LOGININI > $QQDIR/bin/login.json"

